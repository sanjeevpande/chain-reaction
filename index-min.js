$(document).ready(function(){var e={red:true,green:false,blue:false},t=function(){var t={};t[e["red"]]="red";t[e["green"]]="green";t[e["blue"]]="blue";return t[true]},n=function(e){var t=true;if(e.find("span").length){var n=e.css("border-top-color"),r=e.find("span").css("background-color");if(n!==r){t=false}}return t},r=function(e){var t;if(e.find(".ball").length===1){t="<span class='ball ball1'></span>";e.find("div").append(t)}else if(e.find(".ball").length===2){t="<span class='ball ball2'></span>";e.find("div").append(t);e.find(".ball2").css("margin-left","20px");e.find(".ball2").css("margin-top","25px");e.find("div").addClass("rotateB")}else if(e.find(".ball").length===3){var n=e.prev("li"),r=e.next("li"),s=e.parent("ul"),o=s.prev(),u=s.next(),a=e.index(),f=o.find("li").eq(a),l=u.find("li").eq(a),c=e.css("border-top-color");e.find("span").remove();i(e,n,c);i(e,r,c);i(e,f,c);i(e,l,c);n.find("span").css("background-color",c);r.find("span").css("background-color",c);f.find("span").css("background-color",c);l.find("span").css("background-color",c)}else{t="<div><span class='ball'></span></div>";e.append(t)}},i=function(e,t,n){if(t.find("span").length){if(t.find("span").length===1){ball="<span class='ball ball1'></span>"}else if(t.find("span").length===2){ball="<span class='ball ball2'></span>";t.find("div").addClass("rotateB")}else if(t.find("span").length===3){t.find("span").css("background-color",n);e.find("span").remove();t.trigger("click")}t.find("span").parent().append(ball)}else{ball="<div><span class='ball'></span></div>";t.append(ball)}};assignPlayerTurn=function(t){if(e["red"]){t.find(".ball").addClass("red");$("li").css("border-color","green");e["red"]=false;e["green"]=true;e["blue"]=false;return}if(e["green"]){t.find(".ball").addClass("green");$("li").css("border-color","blue");e["red"]=false;e["green"]=false;e["blue"]=true;return}if(e["blue"]){t.find(".ball").addClass("blue");$("li").css("border-color","red");e["red"]=true;e["green"]=false;e["blue"]=false;return}};$("li").on("click",function(){var e=$(this);var t=n(e);if(!t){return}r(e);assignPlayerTurn(e)})})