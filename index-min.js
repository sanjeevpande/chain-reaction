$(document).ready(function(){var e,t=false;$("#start").on("click",function(){var t=parseInt($("#inputBox").val(),10);if(t<2||t>10){alert("Players can be max 10 and min 2");return}$(".inputContainer").addClass("hide");$(".container").removeClass("hide").addClass("show");$("body").css("background-color","#888830");var n=["red","green","blue","yellow","pink","brown","cyan","violet","indigo","orange"];var r="{";for(var i=0;i<t;i++){r+='"'+n[i]+'"'+":"+false+","}r+="}";r=r.replace(",}","}");e=$.parseJSON(r);e[Object.keys(e)[0]]=true;var s=5});var n=function(e){var t=true;if(e.find("span").length){var n=e.css("border-top-color"),r=e.find("span").css("background-color");if(n!==r){t=false}}return t},r=function(){var t;for(var n in e){if(e[n]){t=n;break}}return t},i=function(e){var t;var n=e.prev("li"),i=e.next("li"),o=e.parent("ul"),u=o.prev(),a=o.next(),f=e.index(),l=u.find("li").eq(f),c=a.find("li").eq(f),h=e.css("border-top-color"),p=r();if(e.find(".ball").length===1){if(e[0]===$("ul:first").find("li:first")[0]||e[0]===$("ul:first").find("li:last")[0]||e[0]===$("ul:last").find("li:first")[0]||e[0]===$("ul:last").find("li:last")[0]){e.find("div").remove();s(e,n,h);s(e,i,h);s(e,l,h);s(e,c,h);n.find("span").css("background-color",h);n.find("span").attr("data-color",p);i.find("span").css("background-color",h);i.find("span").attr("data-color",p);l.find("span").css("background-color",h);l.find("span").attr("data-color",p);c.find("span").css("background-color",h);c.find("span").attr("data-color",p)}else{t="<span class='ball ball1'></span>";e.find("div").append(t);e.find("span").attr("data-color",p)}}else if(e.find(".ball").length===2){if(e[0]===$("ul:first").find("li").eq(e.index())[0]||e[0]===$("ul:last").find("li").eq(e.index())[0]||e[0]===$("ul").find("li:first").eq(e.parent().index())[0]||e[0]===$("ul").find("li:last").eq(e.parent().index())[0]){e.find("div").remove();s(e,n,h);s(e,i,h);s(e,l,h);s(e,c,h);n.find("span").css("background-color",h);n.find("span").attr("data-color",p);i.find("span").css("background-color",h);i.find("span").attr("data-color",p);l.find("span").css("background-color",h);l.find("span").attr("data-color",p);c.find("span").css("background-color",h);c.find("span").attr("data-color",p)}else{t="<span class='ball ball2'></span>";e.find("div").append(t);e.find(".ball2").css("margin-left","20px");e.find(".ball2").css("margin-top","25px");e.find("span").attr("data-color",p);e.find("div").addClass("rotateB")}}else if(e.find(".ball").length===3){e.find("div").remove();s(e,n,h);s(e,i,h);s(e,l,h);s(e,c,h);n.find("span").css("background-color",h);n.find("span").attr("data-color",p);i.find("span").css("background-color",h);i.find("span").attr("data-color",p);l.find("span").css("background-color",h);l.find("span").attr("data-color",p);c.find("span").css("background-color",h);c.find("span").attr("data-color",p)}else{t="<div><span class='ball'></span></div>";e.append(t);e.find("span").attr("data-color",p)}},s=function(e,t,n){if(!t.length){return}var i=r();if(t.find("span").length){if(t.find("span").length===1){if(e[0]===$("ul:first").find("li:first")[0]||e[0]===$("ul:first").find("li:last")[0]||e[0]===$("ul:last").find("li:first")[0]||e[0]===$("ul:last").find("li:last")[0]){t.find("span").css("background-color",n);t.find("span").attr("data-color",i);t.trigger("myClick")}else{ball="<span class='ball ball1'></span>";t.find("span").parent().append(ball);t.find("span").attr("data-color",i);if(t.find("span").length>1&&(t[0]===$("ul:first").find("li:first")[0]||t[0]===$("ul:first").find("li:last")[0]||t[0]===$("ul:last").find("li:first")[0]||t[0]===$("ul:last").find("li:last")[0])){t.find("span").css("background-color",n);t.find("span").attr("data-color",i);t.trigger("myClick")}}}else if(t.find("span").length===2){if(e[0]===$("ul:first").find("li").eq(e.index())[0]||e[0]===$("ul:last").find("li").eq(e.index())[0]||e[0]===$("ul").find("li:first").eq(e.parent().index())[0]||e[0]===$("ul").find("li:last").eq(e.parent().index())[0]){t.find("span").css("background-color",n);t.find("span").attr("data-color",i);t.trigger("myClick")}else{ball="<span class='ball ball2'></span>";t.find("div").addClass("rotateB");t.find("span").parent().append(ball);t.find("span").attr("data-color",i);if(t.find("span").length>2&&(t[0]===$("ul:first").find("li").eq(t.index())[0]||t[0]===$("ul:last").find("li").eq(t.index())[0]||t[0]===$("ul").find("li:first").eq(t.parent().index())[0]||t[0]===$("ul").find("li:last").eq(t.parent().index())[0])){t.find("span").css("background-color",n);t.find("span").attr("data-color",i);t.trigger("myClick")}}}else if(t.find("span").length===3){t.find("span").css("background-color",n);t.find("span").attr("data-color",i);t.trigger("myClick")}}else{ball="<div><span class='ball'></span></div>";t.append(ball);t.find("span").attr("data-color",i)}},o=0,u=function(n){var r=false,i=$("li").css("border-top-color");for(var s=0;s<n.length;s++){if(t&&!$("span[data-color="+n[s]+"]").length){delete e[n[s]]}}},a=function(n){var r=Object.keys(e);u(r);r=Object.keys(e);if(r.length===1){alert(r[0]+" win.");$("li").off("click");return}if(e[r[o]]){n.find(".ball").addClass(r[o]);if(o===r.length-1){o=-1;t=true}$("li").css("border-color",r[o+1]);for(player in e){e[player]=false}e[r[o+1]]=true;o++}};$("li").on("click",function(){var e=$(this);var t=n(e);if(!t){return}i(e);a(e)});$("li").on("myClick",function(){var e=$(this);var t=n(e);if(!t){return}i(e)})})